(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),o=t.n(c),r=t(3),a=t(2),u=t(0),l=function(e){var n=e.filterName,t=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:n,onChange:t})]})},i=function(e){var n=e.persons,t=e.filterName,c=e.deletePerson;return Object(u.jsx)("div",{children:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return window.confirm("Delete ".concat(e.name,"?"))?c(e.id):console.log("delete cancelled")},children:"delete"})]},e.id)}))})},s=function(e){var n=e.addPerson,t=e.newName,c=e.handleNameChange,o=e.newNumber,r=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=t(4),f=t.n(d),j="/api/persons",h={getAll:function(){return f.a.get(j).then((function(e){return e.data}))},create:function(e){return f.a.post(j,e).then((function(e){return e.data}))},deleteRequest:function(e){return f.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},update:function(e,n){return f.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))}},m=function(e){var n=e.message;return null===n?null:Object(u.jsx)("div",{className:"message message-".concat(n.type),children:n.text})},b=(t(38),function(){var e=Object(a.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),d=Object(r.a)(o,2),f=d[0],j=d[1],b=Object(a.useState)(""),g=Object(r.a)(b,2),p=g[0],O=g[1],v=Object(a.useState)(""),x=Object(r.a)(v,2),w=x[0],N=x[1],C=Object(a.useState)(null),y=Object(r.a)(C,2),S=y[0],k=y[1];Object(a.useEffect)((function(){console.log("effect"),h.getAll().then((function(e){console.log("promise fulfilled"),c(e)}))}),[]),console.log("render",t.length,"persons");return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:S}),Object(u.jsx)(l,{filterName:w,handleFilterChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{addPerson:function(e){e.preventDefault();var n={name:f,number:p};t.some((function(e){return e.name===f}))?window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))?t.map((function(e){return e.name===f&&(t=e.id,o=n,void h.update(t,o).then((function(){h.getAll().then((function(e){console.log("update fulfilled"),k({text:"phone number updated",type:"fulfilled"}),setTimeout((function(){k(null)}),4e3),c(e),j(""),O("")}))})));var t,o})):console.log("update cancelled"):h.create(n).then((function(e){k({text:"Added ".concat(f),type:"fulfilled"}),setTimeout((function(){k(null)}),4e3),c(t.concat(e)),j(""),O("")}))},newName:f,handleNameChange:function(e){console.log(e.target.value),j(e.target.value)},newNumber:p,handleNumberChange:function(e){console.log(e.target.value),O(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(i,{deletePerson:function(e){var n=t.find((function(n){return n.id===e}));h.deleteRequest(e).then((function(){c(t.filter((function(n){return n.id!==e}))),k({text:"".concat(n.name," removed from server"),type:"fulfilled"}),setTimeout((function(){k(null)}),4e3)})).catch((function(){k({text:"Information of ".concat(n.name," already removed from server"),type:"error"}),setTimeout((function(){k(null)}),4e3)}))},persons:t,filterName:w})]})});o.a.render(Object(u.jsx)(b,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.ceeb329d.chunk.js.map