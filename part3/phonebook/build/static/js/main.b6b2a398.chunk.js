(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var o=n(14),c=n.n(o),r=n(3),a=n(2),u=n(0),l=function(e){var t=e.filterName,n=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with",Object(u.jsx)("input",{value:t,onChange:n})]})},i=function(e){var t=e.persons,n=e.filterName,o=e.deletePerson;return Object(u.jsx)("div",{children:t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(u.jsxs)("p",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return window.confirm("Delete ".concat(e.name,"?"))?o(e.id):console.log("delete cancelled")},children:"delete"})]},e.id)}))})},s=function(e){var t=e.addPerson,n=e.newName,o=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(u.jsxs)("form",{onSubmit:t,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:o})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:c,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},d=n(4),f=n.n(d),h="/api/persons",j={getAll:function(){return f.a.get(h).then((function(e){return e.data}))},create:function(e){return f.a.post(h,e).then((function(e){return e.data}))},deleteRequest:function(e){return f.a.delete("".concat(h,"/").concat(e)).then((function(e){return e.data}))},update:function(e,t){return f.a.put("".concat(h,"/").concat(e),t).then((function(e){return e.data}))}},m=function(e){var t=e.message;return null===t?null:Object(u.jsx)("div",{className:"message message-".concat(t.type),children:t.text})},b=(n(38),function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),d=Object(r.a)(c,2),f=d[0],h=d[1],b=Object(a.useState)(""),p=Object(r.a)(b,2),g=p[0],O=p[1],v=Object(a.useState)(""),x=Object(r.a)(v,2),w=x[0],N=x[1],C=Object(a.useState)(null),y=Object(r.a)(C,2),S=y[0],T=y[1];Object(a.useEffect)((function(){console.log("effect"),j.getAll().then((function(e){console.log("promise fulfilled"),o(e)}))}),[]),console.log("render",n.length,"persons");return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(m,{message:S}),Object(u.jsx)(l,{filterName:w,handleFilterChange:function(e){console.log(e.target.value),N(e.target.value)}}),Object(u.jsx)("h2",{children:"add a new"}),Object(u.jsx)(s,{addPerson:function(e){e.preventDefault();var t={name:f,number:g};n.some((function(e){return e.name===f}))?window.confirm("".concat(f," is already added to phonebook, replace the old number with a new one?"))?n.map((function(e){return e.name===f&&(n=e.id,c=t,void j.update(n,c).then((function(){j.getAll().then((function(e){o(e),console.log("update fulfilled"),T({text:"phone number updated",type:"fulfilled"}),setTimeout((function(){T(null)}),4e3)})).catch((function(e){T({text:e.response.data.error,type:"error"}),setTimeout((function(){T(null)}),4e3)})),h(""),O("")})));var n,c})):console.log("update cancelled"):(j.create(t).then((function(e){T({text:"Added ".concat(f),type:"fulfilled"}),setTimeout((function(){T(null)}),4e3),o(n.concat(e))})).catch((function(e){T({text:e.response.data.error,type:"error"}),setTimeout((function(){T(null)}),4e3)})),h(""),O(""))},newName:f,handleNameChange:function(e){console.log(e.target.value),h(e.target.value)},newNumber:g,handleNumberChange:function(e){console.log(e.target.value),O(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(i,{deletePerson:function(e){var t=n.find((function(t){return t.id===e}));j.deleteRequest(e).then((function(){o(n.filter((function(t){return t.id!==e}))),T({text:"".concat(t.name," removed from server"),type:"fulfilled"}),setTimeout((function(){T(null)}),4e3)})).catch((function(){T({text:"Information of ".concat(t.name," already removed from server"),type:"error"}),setTimeout((function(){T(null)}),4e3)}))},persons:n,filterName:w})]})});c.a.render(Object(u.jsx)(b,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b6b2a398.chunk.js.map